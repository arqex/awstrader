import { bollinger } from "./bollinger";

describe('bollinger bands', () => {
	it('should return the expected resutls for candles', () => {
		// @ts-ignore
		const result = bollinger(testCandles, {period:10});
		expect(result).toEqual(expectedResults);
	})
})

const testCandles = [[0,0,127.75,127.75,127.75],[0,0,129.02,129.02,129.02],[0,0,132.75,132.75,132.75],[0,0,145.4,145.4,145.4],[0,0,148.98,148.98,148.98],[0,0,137.52,137.52,137.52],[0,0,147.38,147.38,147.38],[0,0,139.05,139.05,139.05],[0,0,137.23,137.23,137.23],[0,0,149.3,149.3,149.3],[0,0,162.45,162.45,162.45],[0,0,178.95,178.95,178.95],[0,0,200.35,200.35,200.35],[0,0,221.9,221.9,221.9],[0,0,243.23,243.23,243.23],[0,0,243.52,243.52,243.52],[0,0,286.42,286.42,286.42],[0,0,280.27,280.27,280.27]];
const expectedResults = [
  {
    "lower": 124.13430685095913,
    "middle": 139.438,
    "upper": 154.74169314904083,
  },
  {
    "lower": 124.38189560646923,
    "middle": 142.908,
    "upper": 161.43410439353073,
  },
  {
    "lower": 121.7102375826896,
    "middle": 147.901,
    "upper": 174.0917624173104,
  },
  {
    "lower": 115.78036785493323,
    "middle": 154.661,
    "upper": 193.54163214506679,
  },
  {
    "lower": 107.06844071822883,
    "middle": 162.31099999999998,
    "upper": 217.55355928177113,
  },
  {
    "lower": 99.31718023607398,
    "middle": 171.736,
    "upper": 244.154819763926,
  },
  {
    "lower": 102.41148150911386,
    "middle": 182.33599999999998,
    "upper": 262.2605184908861,
  },
  {
    "lower": 98.98123874940623,
    "middle": 196.24,
    "upper": 293.4987612505938,
  },
  {
    "lower": 109.47750652354941,
    "middle": 210.362,
    "upper": 311.2464934764506,
  }
]